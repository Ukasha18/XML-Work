!function t(e,i,s){function r(a,o){if(!i[a]){if(!e[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(n)return n(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[a]={exports:{}};e[a][0].call(u.exports,(function(t){return r(e[a][1][t]||t)}),u,u.exports,t,e,i,s)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)r(s[a]);return r}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],s=!0,r=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(s=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){r=!0,n=t}finally{try{!s&&o.return&&o.return()}finally{if(r)throw n}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$scope=jQuery(e)}return s(t,[{key:"addListeners",value:function(){for(var t in this.listeners)this.addListener(t,this.listeners[t])}},{key:"addListener",value:function(t,e){if(e instanceof Array)for(var i in e)e.hasOwnProperty(i)&&this.addListener(t,e[i]);else this[t].on(e.ev,this[e.func].bind(this))}},{key:"addSelectors",value:function(){for(var t in this.selectors)this.addSelector(t,this.selectors[t])}},{key:"addSelector",value:function(t,e){this["$"+t]=this.$scope.find(e)}}]),t}();i.getCookie=function(t){var e=("; "+document.cookie).split("; "+t+"=");if(2==e.length)return e.pop().split(";").shift()},i.setCookie=function(t,e,i){var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3);var r="; expires="+s.toGMTString();document.cookie=t+"="+e+r+";path=/"},i.getParam=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search,i=RegExp("[?&]"+t+"=([^&]*)").exec(e);return i&&decodeURIComponent(i[1].replace(/\+/g," "))},i.getParams=function(){var t=window.location.search;return!!t&&(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce((function(t,e){var i=e.split("="),s=r(i,2),n=s[0],a=s[1];return t[n]=a?decodeURIComponent(a.replace(/\+/g," ")):"",t}),{})},i.debounce=function(t,e,i){var s;return function(){var r=this,n=arguments,a=function(){s=null,i||t.apply(r,n)},o=i&&!s;clearTimeout(s),s=setTimeout(a,e),o&&t.apply(r,n)}},i.superscript=function(){jQuery((function(t){t("p,h1,h2,h3,h4,h5,h6,li,a,span,td,th,i,b,u,em,strong,del,label,small").contents().filter((function(){return 3===this.nodeType})).replaceWith((function(){return this.nodeValue.replace(/[®™️]/g,"<sup>$&</sup>")}))}))},i.urlDecode=function(t){return decodeURIComponent((t+"").replace(/\+/g,"%20"))},i.RezberryClass=n},{}],2:[function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();var r=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.addSelectors(),i.addListeners();var s=new URLSearchParams(window.location.search),r=window.location.pathname.split("/");return s&&(i.industriesList=s.has("industry")?i.convertParamToArray(s.get("industry")):[],i.servicesList=s.has("service")?i.convertParamToArray(s.get("service")):[]),""!==r[2]?i.typeFilter=r[2]:i.typeFilter="","tag"==r[2]&&(i.tagFilter=r[3]),i.$loading=$(".loading"),i.$activeFiltersBar=$(".t-insights-active-filters"),i.page=1,i.restBase="/wp-json/rez/posts-insights",i.totalPages=0,i.postType="insights",i.activeIndustries=[],i.activeServices=[],i.setActiveFilters(),i.updateActiveFiltersBar(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),s(e,[{key:"searchInsights",value:function(t){this.$loading.show(),this.keyword=$(t.target).val(),this.fetchPosts(this.restBase,{type:this.typeFilter,industry:this.industriesList,service:this.servicesList,s:this.keyword,page:1,postType:"insights"},!1)}},{key:"filterIndustries",value:function(t){this.$loading.show();var e=$(t.target).val();this.industriesList.includes(e)?this.industriesList=$.grep(this.industriesList,(function(t){return t!=e})):this.industriesList.push(e),this.updateUrlParams("industry",e,this.industriesList),this.updateActiveFiltersBar($(t.target)),this.fetchPosts(this.restBase,{type:this.typeFilter,industry:this.industriesList,service:this.servicesList,s:this.keyword,page:1,postType:"insights"},!1)}},{key:"filterServices",value:function(t){this.$loading.show();var e=$(t.target).val();this.servicesList.includes(e)?this.servicesList=$.grep(this.servicesList,(function(t){return t!=e})):this.servicesList.push(e),this.updateUrlParams("service",e,this.servicesList),this.updateActiveFiltersBar($(t.target)),this.fetchPosts(this.restBase,{type:this.typeFilter,industry:this.industriesList,service:this.servicesList,s:this.keyword,page:1,postType:"insights"},!1)}},{key:"setActiveFilters",value:function(){var t=new URLSearchParams(window.location.search);this.activeIndustries=t.has("industry")?this.convertParamToArray(t.get("industry")):[];var e=this.activeIndustries;this.activeIndustries.length>0&&$('#insight-topics-industry input[type="checkbox"]').each((function(){e.indexOf($(this).val())>-1&&$(this).prop("checked",!0)})),this.activeServices=t.has("service")?this.convertParamToArray(t.get("service")):[];var i=this.activeServices;this.activeServices.length>0&&$('#insight-topics-service input[type="checkbox"]').each((function(){i.indexOf($(this).val())>-1&&$(this).prop("checked",!0)})),this.fetchPosts(this.restBase,{type:this.typeFilter,industry:this.industriesList,service:this.servicesList,page:1,postType:"insights"},!1)}},{key:"updateActiveFiltersBar",value:function(t){this.industriesList||this.servicesList?this.industriesList.length>0||this.servicesList.length>0?(this.$activeFiltersBar.show(),t?$(t).is(":checked")?this.$activeFiltersList.append('<span data-field-id="'+$(t).attr("id")+'" class="active-filter-item">'+$(t).siblings("span").html()+'<button type="button" class="active-filter-remove" data-slug="'+$(t).val()+'">Remove '+$(t).siblings("span").html()+" filter</button></span>"):this.$activeFiltersList.find('.active-filter-item[data-field-id="'+$(t).attr("id")+'"]').remove():$(".dropdown-cbx input[type=checkbox]:checked").each((function(){$(".t-insights-active-filters-list").append('<span data-field-id="'+$(this).attr("id")+'" class="active-filter-item">'+$(this).siblings("span").html()+'<button type="button" class="active-filter-remove" data-slug="'+$(this).val()+'">Remove '+$(this).siblings("span").html()+" filter</button></span>")}))):(this.$activeFiltersBar.hide(),this.$activeFiltersList.find('.active-filter-item[data-field-id="'+$(t).attr("id")+'"]').remove()):this.$activeFiltersBar.hide()}},{key:"resetFilters",value:function(){$('#insight-topics-industry .dropdown-cbx input[type="checkbox"]:checked').each((function(){$(this).click()})),$('#insight-topics-service .dropdown-cbx input[type="checkbox"]:checked').each((function(){$(this).click()}))}},{key:"updateUrlParams",value:function(t,e,i){var s=new URLSearchParams(window.location.search),r=!1;s?(i&&i.length>0&&s.get(t)!=i.join(" ")?(s.set(t,i.join(" ")),r=!0):(s.delete(t),r=!0),$("#filter-types .dropdown-item").each((function(){var t="/insights/"+$(this).data("slug")+"?"+s.toString();$(this).attr("href",t)}))):(s.set(t,i),r=!0),r&&(s.toString().length>0?history.pushState({},"",location.pathname+"?"+s.toString()):history.pushState({},"",""+location.pathname))}},{key:"viewMore",value:function(t){t.preventDefault(),this.page++,this.$loading.show(),this.fetchPosts(this.restBase,{type:this.typeFilter,industry:this.industriesList,service:this.servicesList,page:this.page,postType:"insights"},!0)}},{key:"fetchPosts",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];t="/wp-json/rez/posts-insights",Object.keys(e).length>0&&(t+="?"+$.param(e)),null!=t&&$.get(t,function(t,e,s){this.totalPages=s.getResponseHeader("X-WP-TotalPages"),this.handleFetchPosts(t,i)}.bind(this)).fail(function(t){this.handleFetchPosts(t,i)}.bind(this))}},{key:"handleFetchPosts",value:function(t,e){t?(this.totalPages>1&&this.page!=this.totalPages?this.show(this.$viewMore):this.hide(this.$viewMore),e?this.$posts.append(t):this.$posts.html("").append(t),t.length?(this.$posts.removeClass("temp-hidden"),this.hide(this.$noResults)):this.show(this.$noResults),this.$loading.hide()):this.$loading.hide()}},{key:"hide",value:function(t){t.addClass("d-none")}},{key:"show",value:function(t){t.removeClass("d-none")}},{key:"convertParamToArray",value:function(t){if(t)return t.split(" ")}},{key:"selectors",get:function(){return{noResults:".t-insights-no-results",posts:".t-insights-posts",viewMore:".t-insights-view-more .btn-wrap",industriesCbx:'#insight-topics-industry .dropdown-cbx input[type="checkbox"]',servicesCbx:'#insight-topics-service .dropdown-cbx input[type="checkbox"]',activeFiltersList:".t-insights-active-filters-list",clearAllFilters:".filter-clear",searchInput:".t-insights-search #keywords"}}},{key:"listeners",get:function(){return{$viewMore:[{ev:"click",func:"viewMore"}],$industriesCbx:[{ev:"change",func:"filterIndustries"}],$servicesCbx:[{ev:"change",func:"filterServices"}],$clearAllFilters:[{ev:"click",func:"resetFilters"}],$searchInput:[{ev:"keyup",func:"searchInsights"}]}}}]),e}(t("../../assets/src/js/utilities").RezberryClass);$(document).ready((function(){new r(".t-insights"),$("body").on("click",".dropdown-menu-multiselect",(function(t){$(this).parent().is(".show")&&t.stopPropagation()}))}))},{"../../assets/src/js/utilities":1}]},{},[2]);
//# sourceMappingURL=template-insights-cd94b70fcf.min.js.map
